import{j as a,B as m,C,b as u,f as w,g as P,h as k}from"./index-yPTltIU0.js";import{r as d}from"./vendor-recharts-CyIoRYya.js";import{m as p}from"./api-UhL3eTC1.js";import{t as z}from"./vendor-ui-Cvn9ctBs.js";import{C as L}from"./chevron-left-BgpxHjEI.js";import{C as $}from"./calendar-CdYkP7tM.js";import{C as E}from"./chevron-right-BSQ3e_Wv.js";import"./vendor-react-YualkU3Z.js";import"./vendor-firebase-BLqY7lrF.js";function _(){const[g,h]=d.useState([]),[f,j]=d.useState({}),[M,x]=d.useState(!0),[t,i]=d.useState(0),v=["Segunda","Terça","Quarta","Quinta","Sexta","Sábado","Domingo"];d.useEffect(()=>{N()},[t]);const N=async()=>{try{x(!0);const o=await p.getAlunos();h(o);const e={};for(const n of o)try{const s=await p.getAlunoResumo(n.id);e[n.id]=s.cronogramaSemanal||[]}catch{e[n.id]=[]}j(e)}catch(o){z.error(o.message||"Erro ao carregar dados")}finally{x(!1)}},D=(()=>{const o=new Date,e=o.getDay(),n=e===0?-6:1-e,s=new Date(o);return s.setDate(o.getDate()+n+t*7),Array.from({length:7},(c,l)=>{const r=new Date(s);return r.setDate(s.getDate()+l),r})})(),S=(o,e)=>(f[o]||[]).filter(s=>s.dia===e),b=o=>o.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),y=()=>t===0?"Semana Atual":t===1?"Próxima Semana":t===-1?"Semana Passada":t>0?`Daqui a ${t} semanas`:`Há ${Math.abs(t)} semanas`;return M?a.jsx("div",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:82",className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:83",className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):a.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:89",className:"container mx-auto p-6 space-y-6",children:[a.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:90",className:"flex items-center justify-between",children:[a.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:91",children:[a.jsx("h1",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:92",className:"text-3xl font-bold",children:"Cronograma Consolidado"}),a.jsx("p",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:93",className:"text-muted-foreground",children:"Visualize as atividades de todos os alunos em uma única visão"})]}),a.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:97",className:"flex items-center gap-2",children:[a.jsx(m,{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:98",variant:"outline",size:"icon",onClick:()=>i(t-1),children:a.jsx(L,{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:103",className:"h-4 w-4"})}),a.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:105",className:"flex items-center gap-2 px-4",children:[a.jsx($,{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:106",className:"h-4 w-4"}),a.jsx("span",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:107",className:"font-medium",children:y()})]}),a.jsx(m,{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:109",variant:"outline",size:"icon",onClick:()=>i(t+1),children:a.jsx(E,{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:114",className:"h-4 w-4"})}),t!==0&&a.jsx(m,{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:117",variant:"default",size:"sm",onClick:()=>i(0),children:"Hoje"})]})]}),g.length===0?a.jsx(C,{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:125",children:a.jsx(u,{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:126",className:"py-12",children:a.jsx("p",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:127",className:"text-center text-muted-foreground",children:"Nenhum aluno cadastrado"})})}):a.jsx("div",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:133",className:"space-y-4",children:g.map(o=>a.jsxs(C,{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:135",children:[a.jsxs(w,{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:136",children:[a.jsx(P,{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:137",className:"text-lg",children:o.nome}),a.jsx(k,{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:138",children:o.email})]}),a.jsx(u,{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:140",children:a.jsx("div",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:141",className:"grid grid-cols-7 gap-2",children:v.map((e,n)=>{const s=S(o.id,e),c=D[n],l=c.toDateString()===new Date().toDateString();return a.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:148",className:`border rounded-lg p-3 min-h-[120px] ${l?"bg-blue-50 border-blue-300":"bg-background"}`,children:[a.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:154",className:"font-semibold text-sm mb-2",children:[e,a.jsx("div",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:156",className:"text-xs text-muted-foreground font-normal",children:b(c)})]}),a.jsx("div",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:160",className:"space-y-1",children:s.length>0?s.map((r,A)=>a.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:163",className:"text-xs p-1.5 rounded",style:{backgroundColor:r.cor?`${r.cor}20`:"#e0e7ff",borderLeft:`3px solid ${r.cor||"#3b82f6"}`},children:[a.jsx("div",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:171",className:"font-medium truncate",children:r.atividade==="Outra atividade"?r.atividadePersonalizada:r.atividade}),a.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:176",className:"text-muted-foreground",children:[r.horaInicio," - ",r.horaFim]})]},A)):a.jsx("p",{"data-loc":"client/src/pages/mentor/MentorCronogramaConsolidado.tsx:182",className:"text-xs text-muted-foreground italic",children:"Sem atividades"})})]},e)})})})]},o.id))})]})}export{_ as default};
