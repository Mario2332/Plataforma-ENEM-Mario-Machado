import{j as a,C as G,f as J,a as Q,g as W,b as X,B as d,D as _,p as K,F as aa,k as ea,l as ta,m as sa}from"./index-COTf-AhW.js";import{r as s}from"./vendor-recharts-DGENtP1g.js";import{a as D}from"./api-CiI9U6Ov.js";import{A as oa,a as la,m as ca}from"./api-mentor-conteudos-RIWyxA3I.js";import{C as na}from"./checkbox-DH_AskQ6.js";import{B as ra}from"./badge-Bi_Y7R9X.js";import{S as T,a as E,b as B,c as F,d as l}from"./select-mPygEsj4.js";import{T as da}from"./textarea-DM2AiQXs.js";import{t as h}from"./vendor-ui-Dwsdq65V.js";import{Z as ia}from"./zap-BxW5s6OE.js";import{F as ua}from"./filter-B4kya600.js";import{S as ga}from"./sparkles-qo3gdOxE.js";import{A as xa}from"./arrow-up-down-DiHiZapL.js";function Ca({materiaKey:b}){const[z,L]=s.useState(null),[n,V]=s.useState([]),[r,Y]=s.useState(null),[I,M]=s.useState(!0),[x,P]=s.useState({}),[O,m]=s.useState(null),U=async()=>{try{const e=await ca.getConteudos(b);L(e),V(e.topics||[])}catch(e){h.error(e.message||"Erro ao carregar conteúdos")}},j=async()=>{try{const e=await D.getProgresso(b);Y(e)}catch(e){h.error(e.message||"Erro ao carregar progresso")}},H=async()=>{M(!0),await Promise.all([U(),j()]),M(!1)};s.useEffect(()=>{H()},[b]);const[i,Z]=s.useState("name"),[p,v]=s.useState("asc"),[u,N]=s.useState("todos"),[g,y]=s.useState("todos"),w=e=>{i===e?v(p==="asc"?"desc":"asc"):(Z(e),v("asc"))},k=e=>i!==e?a.jsx(xa,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:78",className:"w-4 h-4 opacity-50"}):p==="asc"?a.jsx(oa,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:81",className:"w-4 h-4"}):a.jsx(la,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:82",className:"w-4 h-4"}),f=s.useMemo(()=>{let e=[...n];return u!=="todos"&&(e=e.filter(t=>t.incidenceLevel===u)),g==="estudados"?e=e.filter(t=>r?.[t.id]?.estudado):g==="nao-estudados"&&(e=e.filter(t=>!r?.[t.id]?.estudado)),e.sort((t,c)=>{let o=0;return i==="name"?o=t.name.localeCompare(c.name):i==="incidence"&&(o=t.incidenceValue-c.incidenceValue),p==="asc"?o:-o}),e},[n,i,p,u,g,r]),$=e=>{switch(e){case"Muito alta!":return"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700 shadow-lg";case"Alta!":return"bg-gradient-to-r from-blue-500 to-cyan-500 text-white hover:from-blue-600 hover:to-cyan-600 shadow-lg";case"Média":return"bg-cyan-500 text-white hover:bg-cyan-600 shadow-md";case"Baixa":return"bg-sky-500 text-white hover:bg-sky-600 shadow-md";case"Muito baixa":return"bg-gray-400 text-white hover:bg-gray-500";default:return"bg-gray-300 text-black hover:bg-gray-400"}},C=async(e,t)=>{try{await D.updateProgresso({topicoId:e,...t}),await j(),h.success("Progresso atualizado com sucesso!")}catch(c){h.error(c.message||"Erro ao atualizar progresso")}},q=async e=>{const t=x[e]||"";await C(e,{anotacoes:t}),m(null)},R=e=>{const t=r?.[e]?.anotacoes||"";P({...x,[e]:t}),m(e)},S=n.filter(e=>r?.[e.id]?.estudado).length,A=n.length>0?(S/n.length*100).toFixed(1):"0";return I?a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:149",className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:150",className:"relative",children:[a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:151",className:"animate-spin rounded-full h-20 w-20 border-t-4 border-b-4 border-blue-500"}),a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:152",className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:a.jsx(ia,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:153",className:"h-8 w-8 text-blue-500 animate-pulse"})})]})}):a.jsxs("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:161",className:"container mx-auto py-6 space-y-6 pb-8 animate-fade-in",children:[a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:162",className:"fixed top-20 right-10 w-72 h-72 bg-blue-500/5 rounded-full blur-3xl animate-float pointer-events-none"}),a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:163",className:"fixed bottom-20 left-10 w-96 h-96 bg-cyan-500/5 rounded-full blur-3xl animate-float-delayed pointer-events-none"}),a.jsxs(G,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:165",className:"border-2 hover:shadow-2xl transition-shadow rounded-2xl animate-slide-up",children:[a.jsxs(J,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:166",children:[a.jsxs("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:167",className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:168",className:"p-3 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl shadow-lg",children:a.jsx(Q,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:169",className:"w-8 h-8 text-white"})}),a.jsxs("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:171",className:"flex-1",children:[a.jsx(W,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:172",className:"text-4xl font-black bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:z?.displayName}),a.jsxs("p",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:175",className:"text-muted-foreground font-semibold mt-2",children:[n.length," tópicos • ",f.length," exibidos • Marque como estudado e adicione anotações"]})]})]}),a.jsxs("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:181",className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[a.jsxs("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:182",className:"p-4 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-950/20 dark:to-cyan-950/20 rounded-xl border-2 border-blue-200/50",children:[a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:183",className:"text-sm font-bold text-blue-900 dark:text-blue-300 mb-1",children:"Total de Tópicos"}),a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:184",className:"text-3xl font-black bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:n.length})]}),a.jsxs("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:188",className:"p-4 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-950/20 dark:to-cyan-950/20 rounded-xl border-2 border-blue-200/50",children:[a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:189",className:"text-sm font-bold text-blue-900 dark:text-blue-300 mb-1",children:"Estudados"}),a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:190",className:"text-3xl font-black bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:S})]}),a.jsxs("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:194",className:"p-4 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-950/20 dark:to-cyan-950/20 rounded-xl border-2 border-blue-200/50",children:[a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:195",className:"text-sm font-bold text-blue-900 dark:text-blue-300 mb-1",children:"Progresso"}),a.jsxs("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:196",className:"text-3xl font-black bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:[A,"%"]}),a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:199",className:"mt-2 w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:200",className:"h-full bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full transition-all duration-1000",style:{width:`${A}%`}})})]})]})]}),a.jsxs(X,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:209",className:"space-y-4",children:[a.jsxs("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:210",className:"flex flex-col sm:flex-row gap-4 p-4 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-950/20 dark:to-cyan-950/20 rounded-xl border-2 border-blue-200/50",children:[a.jsxs("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:211",className:"flex items-center gap-2",children:[a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:212",className:"p-2 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-lg shadow-md",children:a.jsx(ua,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:213",className:"w-4 h-4 text-white"})}),a.jsx("span",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:215",className:"text-sm font-black",children:"Filtros:"})]}),a.jsxs("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:218",className:"flex-1 flex flex-col sm:flex-row gap-3",children:[a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:219",className:"flex-1",children:a.jsxs(T,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:220",value:u,onValueChange:N,children:[a.jsx(E,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:221",className:"w-full border-2 font-semibold",children:a.jsx(B,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:222",placeholder:"Incidência"})}),a.jsxs(F,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:224",children:[a.jsx(l,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:225",value:"todos",children:"Todas as incidências"}),a.jsx(l,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:226",value:"Muito alta!",children:"Muito Alta!"}),a.jsx(l,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:227",value:"Alta!",children:"Alta!"}),a.jsx(l,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:228",value:"Média",children:"Média"}),a.jsx(l,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:229",value:"Baixa",children:"Baixa"}),a.jsx(l,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:230",value:"Muito baixa",children:"Muito Baixa"})]})]})}),a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:235",className:"flex-1",children:a.jsxs(T,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:236",value:g,onValueChange:y,children:[a.jsx(E,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:237",className:"w-full border-2 font-semibold",children:a.jsx(B,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:238",placeholder:"Status"})}),a.jsxs(F,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:240",children:[a.jsx(l,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:241",value:"todos",children:"Todos os tópicos"}),a.jsx(l,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:242",value:"estudados",children:"Apenas estudados"}),a.jsx(l,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:243",value:"nao-estudados",children:"Não estudados"})]})]})}),(u!=="todos"||g!=="todos")&&a.jsx(d,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:249",variant:"outline",size:"sm",onClick:()=>{N("todos"),y("todos")},className:"whitespace-nowrap border-2 font-bold hover:bg-blue-100",children:"Limpar filtros"})]})]}),a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:264",className:"overflow-x-auto rounded-xl border-2 border-blue-200/50",children:a.jsxs("table",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:265",className:"w-full border-collapse",children:[a.jsx("thead",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:266",children:a.jsxs("tr",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:267",className:"border-b-2 border-blue-200 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-950/20 dark:to-cyan-950/20",children:[a.jsx("th",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:268",className:"text-left p-4",children:a.jsxs(d,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:269",variant:"ghost",size:"sm",onClick:()=>w("name"),className:"flex items-center gap-1 hover:bg-blue-100 font-black",children:["Conteúdo",k("name")]})}),a.jsx("th",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:279",className:"text-center p-4",children:a.jsxs(d,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:280",variant:"ghost",size:"sm",onClick:()=>w("incidence"),className:"flex items-center gap-1 mx-auto hover:bg-blue-100 font-black",children:["Incidência",k("incidence")]})}),a.jsx("th",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:290",className:"text-center p-4 font-black w-24",children:"Estudado"}),a.jsx("th",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:291",className:"text-center p-4 font-black w-32",children:"Anotações"})]})}),a.jsx("tbody",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:294",children:f.length===0?a.jsx("tr",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:296",children:a.jsxs("td",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:297",colSpan:4,className:"p-12 text-center",children:[a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:298",className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-blue-500/10 to-cyan-500/10 rounded-full flex items-center justify-center",children:a.jsx(ga,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:299",className:"w-12 h-12 text-blue-500"})}),a.jsx("p",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:301",className:"text-lg font-semibold text-gray-600 dark:text-gray-400",children:"Nenhum tópico encontrado com os filtros selecionados."})]})}):f.map(e=>{const t=r?.[e.id],c=t?.anotacoes&&t.anotacoes.trim().length>0;return a.jsxs("tr",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:312",className:"border-b hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-cyan-50/50 transition-all",children:[a.jsx("td",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:313",className:"p-4 font-semibold",children:e.name}),a.jsx("td",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:314",className:"p-4 text-center",children:a.jsx(ra,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:315",className:`${$(e.incidenceLevel)} font-bold px-3 py-1`,children:e.incidenceLevel})}),a.jsx("td",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:319",className:"p-4 text-center",children:a.jsx("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:320",className:"flex justify-center",children:a.jsx(na,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:321",checked:t?.estudado||!1,onCheckedChange:o=>C(e.id,{estudado:o}),className:"w-5 h-5 border-2"})})}),a.jsx("td",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:330",className:"p-4 text-center",children:a.jsxs(_,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:331",open:O===e.id,onOpenChange:o=>!o&&m(null),children:[a.jsx(K,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:332",asChild:!0,children:a.jsxs(d,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:333",variant:c?"default":"outline",size:"sm",onClick:()=>R(e.id),className:c?"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 font-bold shadow-lg":"border-2 font-bold hover:bg-blue-100",children:[a.jsx(aa,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:339",className:"w-4 h-4 mr-1"}),c?"Ver":"Adicionar"]})}),a.jsxs(ea,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:343",className:"max-w-2xl border-2 rounded-2xl",children:[a.jsx(ta,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:344",children:a.jsxs(sa,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:345",className:"text-2xl font-black bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:["Anotações - ",e.name]})}),a.jsxs("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:349",className:"space-y-4",children:[a.jsx(da,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:350",value:x[e.id]||"",onChange:o=>P({...x,[e.id]:o.target.value}),placeholder:"Digite suas anotações sobre este tópico...",className:"min-h-[200px] border-2 font-semibold"}),a.jsxs("div",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:356",className:"flex justify-end gap-2",children:[a.jsx(d,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:357",variant:"outline",onClick:()=>m(null),className:"border-2 font-bold",children:"Cancelar"}),a.jsx(d,{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:360",onClick:()=>q(e.id),className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 font-bold",children:"Salvar"})]})]})]})]})})]},e.id)})})]})})]})]}),a.jsx("style",{"data-loc":"client/src/pages/aluno/conteudos/MateriaPage.tsx:378",children:`
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-20px); } }
        @keyframes float-delayed { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-30px); } }
        @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slide-up { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .animate-float { animation: float 8s ease-in-out infinite; }
        .animate-float-delayed { animation: float-delayed 10s ease-in-out infinite; }
        .animate-fade-in { animation: fade-in 0.8s ease-out; }
        .animate-slide-up { animation: slide-up 0.6s ease-out; }
      `})]})}export{Ca as M};
