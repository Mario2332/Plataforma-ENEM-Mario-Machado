import{j as e,C as m,f as S,g as D,b as g,B as f,D as H,k as Q,l as G,m as $}from"./index-WLmpxpAc.js";import{r as n}from"./vendor-recharts-DGENtP1g.js";import{I as N}from"./input-j9Mt1y9o.js";import{L as c}from"./label-HTU0kMFX.js";import{T as J}from"./textarea-D2PKLqYH.js";import{S as u,a as h,b as T,c as j,d as s}from"./select-C3J285AS.js";import{B as K}from"./badge-Dk3oJgPy.js";import{t as o}from"./vendor-ui-Dwsdq65V.js";import{P as U}from"./plus-B4AWqG_z.js";import{S as W}from"./square-pen-LZ5YO9cp.js";import{T as X}from"./trash-2-pw0ox65X.js";import"./vendor-react-BLxlFB_W.js";import"./vendor-firebase-DcZa5tA2.js";import"./useComposition-JJU1F6nw.js";import"./index-lvVyVqeY.js";import"./index-D2x4P4hR.js";import"./check-D3iQw9qa.js";function pe(){const[C,E]=n.useState([]),[i,F]=n.useState([]),[l,A]=n.useState(""),[P,d]=n.useState(!1),[x,w]=n.useState(null),[V,y]=n.useState(!1),[t,r]=n.useState({titulo:"",descricao:"",categoria:"questoes",prioridade:"media",alunoId:"",dataInicio:"",dataFim:""});n.useEffect(()=>{q()},[]),n.useEffect(()=>{l&&M()},[l]);const q=async()=>{try{const p=((await window.firebase.functions().httpsCallable("mentorFunctions-getAlunos")({})).data||[]).filter(b=>b.mentorId&&b.mentorId!=="todos"&&b.mentorId!=="avulsa");E(p)}catch{o.error("Erro ao carregar alunos")}},M=async()=>{try{y(!0);const a=await window.firebase.functions().httpsCallable("getTarefasMentor")({alunoId:l});F(a.data||[])}catch{o.error("Erro ao carregar tarefas")}finally{y(!1)}},B=()=>{w(null),r({titulo:"",descricao:"",categoria:"questoes",prioridade:"media",alunoId:l,dataInicio:new Date().toISOString().split("T")[0],dataFim:""}),d(!0)},L=a=>{w(a),r({titulo:a.titulo,descricao:a.descricao,categoria:a.categoria,prioridade:a.prioridade,alunoId:a.alunoId,dataInicio:a.dataInicio._seconds?new Date(a.dataInicio._seconds*1e3).toISOString().split("T")[0]:"",dataFim:a.dataFim._seconds?new Date(a.dataFim._seconds*1e3).toISOString().split("T")[0]:""}),d(!0)},k=async()=>{if(!t.titulo||!t.alunoId||!t.dataFim){o.error("Preencha todos os campos obrigatÃ³rios");return}try{x?(await window.firebase.functions().httpsCallable("editarTarefa")({tarefaId:x.id,...t}),o.success("Tarefa atualizada!")):(await window.firebase.functions().httpsCallable("criarTarefa")(t),o.success("Tarefa criada!")),d(!1),M()}catch{o.error("Erro ao salvar tarefa")}},z=async a=>{if(confirm("Tem certeza que deseja deletar esta tarefa?"))try{await window.firebase.functions().httpsCallable("deletarTarefa")({tarefaId:a}),o.success("Tarefa deletada!"),M()}catch{o.error("Erro ao deletar tarefa")}},O=a=>({questoes:"QuestÃµes",videoaula:"VÃ­deo-aula",revisao:"RevisÃ£o",redacao:"RedaÃ§Ã£o",leitura:"Leitura",outro:"Outro"})[a]||a,R=a=>a==="alta"?"destructive":a==="media"?"default":"secondary",_=a=>a==="concluida"?"bg-green-100 text-green-800":a==="atrasada"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800",I=a=>a?(a._seconds?new Date(a._seconds*1e3):new Date(a)).toLocaleDateString("pt-BR"):"",v={pendentes:i.filter(a=>a.status==="pendente").length,concluidas:i.filter(a=>a.status==="concluida").length,atrasadas:i.filter(a=>a.status==="atrasada").length};return e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:196",className:"space-y-6",children:[e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:197",className:"flex items-center justify-between",children:e.jsx("h1",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:198",className:"text-3xl font-bold",children:"GestÃ£o de Tarefas"})}),e.jsxs(m,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:202",children:[e.jsx(S,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:203",children:e.jsx(D,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:204",children:"Selecione um Aluno"})}),e.jsx(g,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:206",children:e.jsxs(u,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:207",value:l,onValueChange:A,children:[e.jsx(h,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:208",children:e.jsx(T,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:209",placeholder:"Escolha um aluno"})}),e.jsx(j,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:211",children:C.map(a=>e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:213",value:a.id,children:a.nome},a.id))})]})})]}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:225",className:"grid grid-cols-3 gap-4",children:[e.jsx(m,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:226",children:e.jsxs(g,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:227",className:"pt-6",children:[e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:228",className:"text-2xl font-bold text-yellow-700",children:v.pendentes}),e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:229",className:"text-sm text-gray-600",children:"Pendentes"})]})}),e.jsx(m,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:232",children:e.jsxs(g,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:233",className:"pt-6",children:[e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:234",className:"text-2xl font-bold text-green-700",children:v.concluidas}),e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:235",className:"text-sm text-gray-600",children:"ConcluÃ­das"})]})}),e.jsx(m,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:238",children:e.jsxs(g,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:239",className:"pt-6",children:[e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:240",className:"text-2xl font-bold text-red-700",children:v.atrasadas}),e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:241",className:"text-sm text-gray-600",children:"Atrasadas"})]})})]}),e.jsxs(m,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:247",children:[e.jsx(S,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:248",children:e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:249",className:"flex items-center justify-between",children:[e.jsx(D,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:250",children:"Tarefas"}),e.jsxs(f,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:251",onClick:B,children:[e.jsx(U,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:252",className:"h-4 w-4 mr-2"}),"Nova Tarefa"]})]})}),e.jsx(g,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:257",children:V?e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:259",className:"text-center py-8 text-gray-500",children:"Carregando..."}):i.length===0?e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:261",className:"text-center py-8 text-gray-500",children:"Nenhuma tarefa criada ainda"}):e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:265",className:"space-y-3",children:i.map(a=>e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:267",className:"p-4 rounded-lg border bg-white hover:shadow-md transition-all",children:e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:271",className:"flex items-start justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:272",className:"flex-1",children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:273",className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:274",className:"font-semibold",children:a.titulo}),e.jsx(K,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:275",variant:R(a.prioridade),children:a.prioridade}),e.jsx("span",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:278",className:`text-xs px-2 py-1 rounded ${_(a.status)}`,children:a.status})]}),a.descricao&&e.jsx("p",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:283",className:"text-sm text-gray-600 mb-2",children:a.descricao}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:285",className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:286",children:["ðŸ“š ",O(a.categoria)]}),e.jsxs("span",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:287",children:["ðŸ“… ",I(a.dataInicio)," - ",I(a.dataFim)]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:290",className:"flex gap-2",children:[e.jsx(f,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:291",variant:"ghost",size:"sm",onClick:()=>L(a),children:e.jsx(W,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:296",className:"h-4 w-4"})}),e.jsx(f,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:298",variant:"ghost",size:"sm",onClick:()=>z(a.id),children:e.jsx(X,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:303",className:"h-4 w-4 text-red-500"})})]})]})},a.id))})})]})]}),e.jsx(H,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:317",open:P,onOpenChange:d,children:e.jsxs(Q,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:318",className:"max-w-2xl",children:[e.jsx(G,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:319",children:e.jsx($,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:320",children:x?"Editar Tarefa":"Nova Tarefa"})}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:322",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:323",children:[e.jsx(c,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:324",children:"TÃ­tulo *"}),e.jsx(N,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:325",value:t.titulo,onChange:a=>r({...t,titulo:a.target.value}),placeholder:"Ex: Fazer 50 questÃµes de Biologia"})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:332",children:[e.jsx(c,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:333",children:"DescriÃ§Ã£o"}),e.jsx(J,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:334",value:t.descricao,onChange:a=>r({...t,descricao:a.target.value}),placeholder:"Detalhes adicionais...",rows:3})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:342",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:343",children:[e.jsx(c,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:344",children:"Categoria *"}),e.jsxs(u,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:345",value:t.categoria,onValueChange:a=>r({...t,categoria:a}),children:[e.jsx(h,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:349",children:e.jsx(T,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:350"})}),e.jsxs(j,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:352",children:[e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:353",value:"questoes",children:"QuestÃµes"}),e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:354",value:"videoaula",children:"VÃ­deo-aula"}),e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:355",value:"revisao",children:"RevisÃ£o"}),e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:356",value:"redacao",children:"RedaÃ§Ã£o"}),e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:357",value:"leitura",children:"Leitura"}),e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:358",value:"outro",children:"Outro"})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:363",children:[e.jsx(c,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:364",children:"Prioridade *"}),e.jsxs(u,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:365",value:t.prioridade,onValueChange:a=>r({...t,prioridade:a}),children:[e.jsx(h,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:369",children:e.jsx(T,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:370"})}),e.jsxs(j,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:372",children:[e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:373",value:"alta",children:"Alta"}),e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:374",value:"media",children:"MÃ©dia"}),e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:375",value:"baixa",children:"Baixa"})]})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:381",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:382",children:[e.jsx(c,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:383",children:"Data InÃ­cio *"}),e.jsx(N,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:384",type:"date",value:t.dataInicio,onChange:a=>r({...t,dataInicio:a.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:391",children:[e.jsx(c,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:392",children:"Data Fim *"}),e.jsx(N,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:393",type:"date",value:t.dataFim,onChange:a=>r({...t,dataFim:a.target.value})})]})]}),!x&&e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:402",children:[e.jsx(c,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:403",children:"Aluno *"}),e.jsxs(u,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:404",value:t.alunoId,onValueChange:a=>r({...t,alunoId:a}),children:[e.jsx(h,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:408",children:e.jsx(T,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:409",placeholder:"Escolha um aluno"})}),e.jsx(j,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:411",children:C.map(a=>e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:413",value:a.id,children:a.nome},a.id))})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:422",className:"flex gap-2 justify-end",children:[e.jsx(f,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:423",variant:"outline",onClick:()=>d(!1),children:"Cancelar"}),e.jsx(f,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:426",onClick:k,children:x?"Atualizar":"Criar"})]})]})]})})]})}export{pe as default};
