import{j as e,C as m,f as D,g as E,b as g,B as p,D as Q,k as G,l as $,m as J}from"./index-DJaLpd4Q.js";import{r as n}from"./vendor-recharts-DGENtP1g.js";import{I as C}from"./input-DSmHUlch.js";import{L as c}from"./label-GzOrQVRC.js";import{T as K}from"./textarea-CaR0BS5G.js";import{S as T,a as h,b as j,c as M,d as s}from"./select-CU6_thrt.js";import{B as U}from"./badge-BnVY3d1h.js";import{t as o}from"./vendor-ui-Dwsdq65V.js";import{m as f}from"./api-DswjofDR.js";import{P as W}from"./plus-CtirpGsI.js";import{S as X}from"./square-pen-CGnRXeiA.js";import{T as Y}from"./trash-2-DXIYD3j6.js";import"./vendor-react-BLxlFB_W.js";import"./vendor-firebase-DcZa5tA2.js";import"./useComposition-JJU1F6nw.js";import"./index-BoJSQMzv.js";import"./index-D2x4P4hR.js";import"./check-Drkk8_bS.js";function Te(){const[b,F]=n.useState([]),[i,A]=n.useState([]),[l,P]=n.useState(""),[V,d]=n.useState(!1),[x,S]=n.useState(null),[q,I]=n.useState(!1),[t,r]=n.useState({titulo:"",descricao:"",categoria:"questoes",prioridade:"media",alunoId:"",dataInicio:"",dataFim:""});n.useEffect(()=>{B()},[]),n.useEffect(()=>{l&&v()},[l]);const B=async()=>{try{const u=(await f.getAlunos()||[]).filter(y=>y.mentorId&&y.mentorId!=="todos"&&y.mentorId!=="avulsa");F(u)}catch{o.error("Erro ao carregar alunos")}},v=async()=>{try{I(!0);const a=await f.getTarefasMentor(l);A(a||[])}catch{o.error("Erro ao carregar tarefas")}finally{I(!1)}},L=()=>{S(null),r({titulo:"",descricao:"",categoria:"questoes",prioridade:"media",alunoId:l,dataInicio:new Date().toISOString().split("T")[0],dataFim:""}),d(!0)},k=a=>{S(a),r({titulo:a.titulo,descricao:a.descricao,categoria:a.categoria,prioridade:a.prioridade,alunoId:a.alunoId,dataInicio:a.dataInicio._seconds?new Date(a.dataInicio._seconds*1e3).toISOString().split("T")[0]:"",dataFim:a.dataFim._seconds?new Date(a.dataFim._seconds*1e3).toISOString().split("T")[0]:""}),d(!0)},z=async()=>{if(!t.titulo||!t.alunoId||!t.dataFim){o.error("Preencha todos os campos obrigatÃ³rios");return}try{x?(await f.editarTarefa({tarefaId:x.id,...t}),o.success("Tarefa atualizada!")):(await f.criarTarefa(t),o.success("Tarefa criada!")),d(!1),v()}catch{o.error("Erro ao salvar tarefa")}},O=async a=>{if(confirm("Tem certeza que deseja deletar esta tarefa?"))try{await f.deletarTarefa(a),o.success("Tarefa deletada!"),v()}catch{o.error("Erro ao deletar tarefa")}},R=a=>({questoes:"QuestÃµes",videoaula:"VÃ­deo-aula",revisao:"RevisÃ£o",redacao:"RedaÃ§Ã£o",leitura:"Leitura",outro:"Outro"})[a]||a,_=a=>a==="alta"?"destructive":a==="media"?"default":"secondary",H=a=>a==="concluida"?"bg-green-100 text-green-800":a==="atrasada"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800",w=a=>a?(a._seconds?new Date(a._seconds*1e3):new Date(a)).toLocaleDateString("pt-BR"):"",N={pendentes:i.filter(a=>a.status==="pendente").length,concluidas:i.filter(a=>a.status==="concluida").length,atrasadas:i.filter(a=>a.status==="atrasada").length};return e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:190",className:"space-y-6",children:[e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:191",className:"flex items-center justify-between",children:e.jsx("h1",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:192",className:"text-3xl font-bold",children:"GestÃ£o de Tarefas"})}),e.jsxs(m,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:196",children:[e.jsx(D,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:197",children:e.jsx(E,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:198",children:"Selecione um Aluno"})}),e.jsx(g,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:200",children:e.jsxs(T,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:201",value:l,onValueChange:P,children:[e.jsx(h,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:202",children:e.jsx(j,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:203",placeholder:"Escolha um aluno"})}),e.jsx(M,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:205",children:b.map(a=>e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:207",value:a.id,children:a.nome},a.id))})]})})]}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:219",className:"grid grid-cols-3 gap-4",children:[e.jsx(m,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:220",children:e.jsxs(g,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:221",className:"pt-6",children:[e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:222",className:"text-2xl font-bold text-yellow-700",children:N.pendentes}),e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:223",className:"text-sm text-gray-600",children:"Pendentes"})]})}),e.jsx(m,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:226",children:e.jsxs(g,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:227",className:"pt-6",children:[e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:228",className:"text-2xl font-bold text-green-700",children:N.concluidas}),e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:229",className:"text-sm text-gray-600",children:"ConcluÃ­das"})]})}),e.jsx(m,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:232",children:e.jsxs(g,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:233",className:"pt-6",children:[e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:234",className:"text-2xl font-bold text-red-700",children:N.atrasadas}),e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:235",className:"text-sm text-gray-600",children:"Atrasadas"})]})})]}),e.jsxs(m,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:241",children:[e.jsx(D,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:242",children:e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:243",className:"flex items-center justify-between",children:[e.jsx(E,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:244",children:"Tarefas"}),e.jsxs(p,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:245",onClick:L,children:[e.jsx(W,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:246",className:"h-4 w-4 mr-2"}),"Nova Tarefa"]})]})}),e.jsx(g,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:251",children:q?e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:253",className:"text-center py-8 text-gray-500",children:"Carregando..."}):i.length===0?e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:255",className:"text-center py-8 text-gray-500",children:"Nenhuma tarefa criada ainda"}):e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:259",className:"space-y-3",children:i.map(a=>e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:261",className:"p-4 rounded-lg border bg-white hover:shadow-md transition-all",children:e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:265",className:"flex items-start justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:266",className:"flex-1",children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:267",className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:268",className:"font-semibold",children:a.titulo}),e.jsx(U,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:269",variant:_(a.prioridade),children:a.prioridade}),e.jsx("span",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:272",className:`text-xs px-2 py-1 rounded ${H(a.status)}`,children:a.status})]}),a.descricao&&e.jsx("p",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:277",className:"text-sm text-gray-600 mb-2",children:a.descricao}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:279",className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:280",children:["ðŸ“š ",R(a.categoria)]}),e.jsxs("span",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:281",children:["ðŸ“… ",w(a.dataInicio)," - ",w(a.dataFim)]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:284",className:"flex gap-2",children:[e.jsx(p,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:285",variant:"ghost",size:"sm",onClick:()=>k(a),children:e.jsx(X,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:290",className:"h-4 w-4"})}),e.jsx(p,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:292",variant:"ghost",size:"sm",onClick:()=>O(a.id),children:e.jsx(Y,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:297",className:"h-4 w-4 text-red-500"})})]})]})},a.id))})})]})]}),e.jsx(Q,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:311",open:V,onOpenChange:d,children:e.jsxs(G,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:312",className:"max-w-2xl",children:[e.jsx($,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:313",children:e.jsx(J,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:314",children:x?"Editar Tarefa":"Nova Tarefa"})}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:316",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:317",children:[e.jsx(c,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:318",children:"TÃ­tulo *"}),e.jsx(C,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:319",value:t.titulo,onChange:a=>r({...t,titulo:a.target.value}),placeholder:"Ex: Fazer 50 questÃµes de Biologia"})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:326",children:[e.jsx(c,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:327",children:"DescriÃ§Ã£o"}),e.jsx(K,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:328",value:t.descricao,onChange:a=>r({...t,descricao:a.target.value}),placeholder:"Detalhes adicionais...",rows:3})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:336",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:337",children:[e.jsx(c,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:338",children:"Categoria *"}),e.jsxs(T,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:339",value:t.categoria,onValueChange:a=>r({...t,categoria:a}),children:[e.jsx(h,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:343",children:e.jsx(j,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:344"})}),e.jsxs(M,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:346",children:[e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:347",value:"questoes",children:"QuestÃµes"}),e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:348",value:"videoaula",children:"VÃ­deo-aula"}),e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:349",value:"revisao",children:"RevisÃ£o"}),e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:350",value:"redacao",children:"RedaÃ§Ã£o"}),e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:351",value:"leitura",children:"Leitura"}),e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:352",value:"outro",children:"Outro"})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:357",children:[e.jsx(c,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:358",children:"Prioridade *"}),e.jsxs(T,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:359",value:t.prioridade,onValueChange:a=>r({...t,prioridade:a}),children:[e.jsx(h,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:363",children:e.jsx(j,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:364"})}),e.jsxs(M,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:366",children:[e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:367",value:"alta",children:"Alta"}),e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:368",value:"media",children:"MÃ©dia"}),e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:369",value:"baixa",children:"Baixa"})]})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:375",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:376",children:[e.jsx(c,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:377",children:"Data InÃ­cio *"}),e.jsx(C,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:378",type:"date",value:t.dataInicio,onChange:a=>r({...t,dataInicio:a.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:385",children:[e.jsx(c,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:386",children:"Data Fim *"}),e.jsx(C,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:387",type:"date",value:t.dataFim,onChange:a=>r({...t,dataFim:a.target.value})})]})]}),!x&&e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:396",children:[e.jsx(c,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:397",children:"Aluno *"}),e.jsxs(T,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:398",value:t.alunoId,onValueChange:a=>r({...t,alunoId:a}),children:[e.jsx(h,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:402",children:e.jsx(j,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:403",placeholder:"Escolha um aluno"})}),e.jsx(M,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:405",children:b.map(a=>e.jsx(s,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:407",value:a.id,children:a.nome},a.id))})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:416",className:"flex gap-2 justify-end",children:[e.jsx(p,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:417",variant:"outline",onClick:()=>d(!1),children:"Cancelar"}),e.jsx(p,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:420",onClick:z,children:x?"Atualizar":"Criar"})]})]})]})})]})}export{Te as default};
