import{u as I,j as e,C as n,f as l,g as d,U as B,b as i,G as O,h as p}from"./index-DJaLpd4Q.js";import{r as h,f as H,L as C,C as f,X as N,Y as v,T as y,h as b,g as u,B as W,k as Y}from"./vendor-recharts-DGENtP1g.js";import{g as D}from"./api-DswjofDR.js";import{t as P}from"./vendor-ui-Dwsdq65V.js";import{T as R}from"./trending-up-ClZr-8L7.js";import"./vendor-react-BLxlFB_W.js";import"./vendor-firebase-DcZa5tA2.js";function _(){const{user:k}=I(),[m,E]=h.useState([]),[x,$]=h.useState([]),[K,M]=h.useState(!0),S=async()=>{try{M(!0);const[s,r]=await Promise.all([D.getMentores(),D.getAllAlunos()]);E(s),$(r)}catch(s){P.error(s.message||"Erro ao carregar dados")}finally{M(!1)}};h.useEffect(()=>{S()},[]);const T=()=>{if(!x)return[];const s={};x.forEach(o=>{const a=new Date(o.createdAt),c=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;s[c]=(s[c]||0)+1});const r=Object.keys(s).sort();let t=0;return r.map(o=>{t+=s[o];const[a,c]=o.split("-");return{mes:`${["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(c)-1]}/${a.slice(2)}`,novos:s[o],total:t}})},J=()=>{if(!m)return[];const s={};m.forEach(o=>{const a=new Date(o.createdAt),c=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;s[c]=(s[c]||0)+1});const r=Object.keys(s).sort();let t=0;return r.map(o=>{t+=s[o];const[a,c]=o.split("-");return{mes:`${["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(c)-1]}/${a.slice(2)}`,novos:s[o],total:t}})},L=()=>{if(!x||!m)return[];const s={};x.forEach(t=>{const o=t.mentorId||"sem-mentor";s[o]=(s[o]||0)+1});const r=[];return m.forEach(t=>{r.push({nome:t.nome,alunos:s[t.id]||0})}),s.avulso>0&&r.push({nome:"üìå Avulso",alunos:s.avulso}),s.todos>0&&r.push({nome:"üåê Compartilhado",alunos:s.todos}),r.sort((t,o)=>o.alunos-t.alunos)},g=T(),j=J(),A=L(),w=s=>{if(s.length<2)return 0;const r=s[s.length-1].novos,t=s[s.length-2].novos;return t===0?100:((r-t)/t*100).toFixed(1)},G=w(g);return w(j),K?e.jsx("div",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:147",className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:148",className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsxs("div",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:154",className:"space-y-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:155",children:[e.jsx("h1",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:156",className:"text-3xl font-bold",children:"Dashboard do Gestor"}),e.jsxs("p",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:157",className:"text-muted-foreground mt-1",children:["Bem-vindo √† Mentoria M√°rio Machado, ",k?.name,"!"]})]}),e.jsxs("div",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:163",className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(n,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:164",children:[e.jsxs(l,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:165",className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:166",className:"text-sm font-medium",children:"Total de Mentores"}),e.jsx(B,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:167",className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:169",children:[e.jsx("div",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:170",className:"text-2xl font-bold",children:m?.length||0}),e.jsxs("p",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:171",className:"text-xs text-muted-foreground",children:[m?.filter(s=>s.ativo).length||0," ativos"]})]})]}),e.jsxs(n,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:177",children:[e.jsxs(l,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:178",className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:179",className:"text-sm font-medium",children:"Total de Alunos"}),e.jsx(O,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:180",className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:182",children:[e.jsx("div",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:183",className:"text-2xl font-bold",children:x?.length||0}),e.jsx("p",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:184",className:"text-xs text-muted-foreground",children:"Em toda a plataforma"})]})]}),e.jsxs(n,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:190",children:[e.jsxs(l,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:191",className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:192",className:"text-sm font-medium",children:"Crescimento"}),e.jsx(R,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:193",className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:195",children:[e.jsx("div",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:196",className:"text-2xl font-bold",children:g.length>0?`${g[g.length-1].novos}`:"-"}),e.jsx("p",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:201",className:"text-xs text-muted-foreground",children:G!=="0"?`${Number(G)>0?"+":""}${G}% vs m√™s anterior`:"Em breve"})]})]})]}),e.jsxs(n,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:211",children:[e.jsxs(l,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:212",children:[e.jsx(d,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:213",children:"Vis√£o Geral"}),e.jsx(p,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:214",children:"Resumo da Mentoria M√°rio Machado"})]}),e.jsx(i,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:216",children:e.jsx("p",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:217",className:"text-muted-foreground",children:"Gerencie mentores, configure plataformas white-label e acompanhe o crescimento da rede de estudantes."})})]}),e.jsxs("div",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:224",className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(n,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:225",children:[e.jsxs(l,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:226",children:[e.jsx(d,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:227",children:"Crescimento de Alunos"}),e.jsx(p,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:228",children:"Evolu√ß√£o do n√∫mero de alunos ao longo do tempo"})]}),e.jsx(i,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:230",children:g.length>0?e.jsx(H,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:232",width:"100%",height:300,children:e.jsxs(C,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:233",data:g,children:[e.jsx(f,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:234",strokeDasharray:"3 3"}),e.jsx(N,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:235",dataKey:"mes"}),e.jsx(v,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:236"}),e.jsx(y,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:237"}),e.jsx(b,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:238"}),e.jsx(u,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:239",type:"monotone",dataKey:"total",stroke:"#3b82f6",name:"Total Acumulado",strokeWidth:2}),e.jsx(u,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:240",type:"monotone",dataKey:"novos",stroke:"#10b981",name:"Novos no M√™s",strokeWidth:2})]})}):e.jsx("div",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:244",className:"flex items-center justify-center h-[300px] text-muted-foreground",children:"Nenhum dado dispon√≠vel ainda"})})]}),e.jsxs(n,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:251",children:[e.jsxs(l,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:252",children:[e.jsx(d,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:253",children:"Crescimento de Mentores"}),e.jsx(p,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:254",children:"Evolu√ß√£o do n√∫mero de mentores ao longo do tempo"})]}),e.jsx(i,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:256",children:j.length>0?e.jsx(H,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:258",width:"100%",height:300,children:e.jsxs(C,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:259",data:j,children:[e.jsx(f,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:260",strokeDasharray:"3 3"}),e.jsx(N,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:261",dataKey:"mes"}),e.jsx(v,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:262"}),e.jsx(y,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:263"}),e.jsx(b,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:264"}),e.jsx(u,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:265",type:"monotone",dataKey:"total",stroke:"#8b5cf6",name:"Total Acumulado",strokeWidth:2}),e.jsx(u,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:266",type:"monotone",dataKey:"novos",stroke:"#f59e0b",name:"Novos no M√™s",strokeWidth:2})]})}):e.jsx("div",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:270",className:"flex items-center justify-center h-[300px] text-muted-foreground",children:"Nenhum dado dispon√≠vel ainda"})})]})]}),e.jsxs(n,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:279",children:[e.jsxs(l,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:280",children:[e.jsx(d,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:281",children:"Alunos por Mentor"}),e.jsx(p,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:282",children:"Distribui√ß√£o de alunos entre os mentores"})]}),e.jsx(i,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:284",children:A.length>0?e.jsx(H,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:286",width:"100%",height:300,children:e.jsxs(W,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:287",data:A,children:[e.jsx(f,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:288",strokeDasharray:"3 3"}),e.jsx(N,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:289",dataKey:"nome"}),e.jsx(v,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:290"}),e.jsx(y,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:291"}),e.jsx(b,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:292"}),e.jsx(Y,{"data-loc":"client/src/pages/gestor/GestorHome.tsx:293",dataKey:"alunos",fill:"#3b82f6",name:"N√∫mero de Alunos"})]})}):e.jsx("div",{"data-loc":"client/src/pages/gestor/GestorHome.tsx:297",className:"flex items-center justify-center h-[300px] text-muted-foreground",children:"Nenhum dado dispon√≠vel ainda"})})]})]})}export{_ as default};
