import{j as e,C as f,f as D,g as E,b as p,B as u,D as Q,k as G,l as $,m as J}from"./index-Nun9N1Qw.js";import{r as o}from"./vendor-recharts-CyIoRYya.js";import{I as C}from"./input-CWWu1cOy.js";import{L as l}from"./label-BpbaGul4.js";import{T as K}from"./textarea-C1fMR6tw.js";import{S as h,a as j,b as M,c as v,d as r}from"./select-BHgbeQON.js";import{B as U}from"./badge-Dw2gL8v0.js";import{t as c}from"./vendor-ui-Cvn9ctBs.js";import{m as T}from"./api-D3m250Xa.js";import{P as W}from"./plus-DGln46Rn.js";import{S as X}from"./square-pen-DKs-ClXY.js";import{T as Y}from"./trash-2-DxyfRqoC.js";import"./vendor-react-YualkU3Z.js";import"./vendor-firebase-B70hddBE.js";import"./useComposition-iS-LvcVy.js";import"./index-FvdX9rfh.js";import"./index-ChHGvnL7.js";import"./check-PyNu281_.js";function Te(){const[b,F]=o.useState([]),[d,A]=o.useState([]),[i,P]=o.useState(""),[V,x]=o.useState(!1),[m,S]=o.useState(null),[q,I]=o.useState(!1),[t,n]=o.useState({titulo:"",descricao:"",categoria:"questoes",prioridade:"media",alunoId:"",dataInicio:"",dataFim:""});o.useEffect(()=>{z()},[]),o.useEffect(()=>{i&&N()},[i]);const z=async()=>{try{const s=(await T.getAlunos()||[]).filter(g=>g.mentorId&&g.mentorId!=="todos"&&g.mentorId!=="avulsa");F(s)}catch{c.error("Erro ao carregar alunos")}},N=async()=>{try{I(!0);const a=await T.getTarefasMentor(i);A(a||[])}catch{c.error("Erro ao carregar tarefas")}finally{I(!1)}},B=()=>{S(null),n({titulo:"",descricao:"",categoria:"questoes",prioridade:"media",alunoId:i,dataInicio:new Date().toISOString().split("T")[0],dataFim:""}),x(!0)},L=a=>{S(a),n({titulo:a.titulo,descricao:a.descricao,categoria:a.categoria,prioridade:a.prioridade,alunoId:a.alunoId,dataInicio:a.dataInicio._seconds?new Date(a.dataInicio._seconds*1e3).toISOString().split("T")[0]:"",dataFim:a.dataFim._seconds?new Date(a.dataFim._seconds*1e3).toISOString().split("T")[0]:""}),x(!0)},O=async()=>{if(!t.titulo||!t.alunoId||!t.dataFim){c.error("Preencha todos os campos obrigatÃ³rios");return}try{m?(await T.editarTarefa({tarefaId:m.id,...t}),c.success("Tarefa atualizada!")):(await T.criarTarefa(t),c.success("Tarefa criada!")),x(!1),N()}catch{c.error("Erro ao salvar tarefa")}},k=async a=>{if(confirm("Tem certeza que deseja deletar esta tarefa?"))try{await T.deletarTarefa(a),c.success("Tarefa deletada!"),N()}catch{c.error("Erro ao deletar tarefa")}},R=a=>({questoes:"QuestÃµes",videoaula:"VÃ­deo-aula",revisao:"RevisÃ£o",redacao:"RedaÃ§Ã£o",leitura:"Leitura",outro:"Outro"})[a]||a,_=a=>a==="alta"?"destructive":a==="media"?"default":"secondary",H=a=>a==="concluida"?"bg-green-100 text-green-800":a==="atrasada"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800",w=a=>{if(!a)return"";let s;a._seconds?s=new Date(a._seconds*1e3):a.toDate?s=a.toDate():s=new Date(a);const g=s.getTimezoneOffset();return s=new Date(s.getTime()+g*60*1e3),s.toLocaleDateString("pt-BR")},y={pendentes:d.filter(a=>a.status==="pendente").length,concluidas:d.filter(a=>a.status==="concluida").length,atrasadas:d.filter(a=>a.status==="atrasada").length};return e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:200",className:"space-y-6",children:[e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:201",className:"flex items-center justify-between",children:e.jsx("h1",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:202",className:"text-3xl font-bold",children:"GestÃ£o de Tarefas"})}),e.jsxs(f,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:206",children:[e.jsx(D,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:207",children:e.jsx(E,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:208",children:"Selecione um Aluno"})}),e.jsx(p,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:210",children:e.jsxs(h,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:211",value:i,onValueChange:P,children:[e.jsx(j,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:212",children:e.jsx(M,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:213",placeholder:"Escolha um aluno"})}),e.jsx(v,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:215",children:b.map(a=>e.jsx(r,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:217",value:a.id,children:a.nome},a.id))})]})})]}),i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:229",className:"grid grid-cols-3 gap-4",children:[e.jsx(f,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:230",children:e.jsxs(p,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:231",className:"pt-6",children:[e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:232",className:"text-2xl font-bold text-yellow-700",children:y.pendentes}),e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:233",className:"text-sm text-gray-600",children:"Pendentes"})]})}),e.jsx(f,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:236",children:e.jsxs(p,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:237",className:"pt-6",children:[e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:238",className:"text-2xl font-bold text-green-700",children:y.concluidas}),e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:239",className:"text-sm text-gray-600",children:"ConcluÃ­das"})]})}),e.jsx(f,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:242",children:e.jsxs(p,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:243",className:"pt-6",children:[e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:244",className:"text-2xl font-bold text-red-700",children:y.atrasadas}),e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:245",className:"text-sm text-gray-600",children:"Atrasadas"})]})})]}),e.jsxs(f,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:251",children:[e.jsx(D,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:252",children:e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:253",className:"flex items-center justify-between",children:[e.jsx(E,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:254",children:"Tarefas"}),e.jsxs(u,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:255",onClick:B,children:[e.jsx(W,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:256",className:"h-4 w-4 mr-2"}),"Nova Tarefa"]})]})}),e.jsx(p,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:261",children:q?e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:263",className:"text-center py-8 text-gray-500",children:"Carregando..."}):d.length===0?e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:265",className:"text-center py-8 text-gray-500",children:"Nenhuma tarefa criada ainda"}):e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:269",className:"space-y-3",children:d.map(a=>e.jsx("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:271",className:"p-4 rounded-lg border bg-white hover:shadow-md transition-all",children:e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:275",className:"flex items-start justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:276",className:"flex-1",children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:277",className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:278",className:"font-semibold",children:a.titulo}),e.jsx(U,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:279",variant:_(a.prioridade),children:a.prioridade}),e.jsx("span",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:282",className:`text-xs px-2 py-1 rounded ${H(a.status)}`,children:a.status})]}),a.descricao&&e.jsx("p",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:287",className:"text-sm text-gray-600 mb-2",children:a.descricao}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:289",className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:290",children:["ðŸ“š ",R(a.categoria)]}),e.jsxs("span",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:291",children:["ðŸ“… ",w(a.dataInicio)," - ",w(a.dataFim)]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:294",className:"flex gap-2",children:[e.jsx(u,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:295",variant:"ghost",size:"sm",onClick:()=>L(a),children:e.jsx(X,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:300",className:"h-4 w-4"})}),e.jsx(u,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:302",variant:"ghost",size:"sm",onClick:()=>k(a.id),children:e.jsx(Y,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:307",className:"h-4 w-4 text-red-500"})})]})]})},a.id))})})]})]}),e.jsx(Q,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:321",open:V,onOpenChange:x,children:e.jsxs(G,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:322",className:"max-w-2xl",children:[e.jsx($,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:323",children:e.jsx(J,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:324",children:m?"Editar Tarefa":"Nova Tarefa"})}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:326",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:327",children:[e.jsx(l,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:328",children:"TÃ­tulo *"}),e.jsx(C,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:329",value:t.titulo,onChange:a=>n({...t,titulo:a.target.value}),placeholder:"Ex: Fazer 50 questÃµes de Biologia"})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:336",children:[e.jsx(l,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:337",children:"DescriÃ§Ã£o"}),e.jsx(K,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:338",value:t.descricao,onChange:a=>n({...t,descricao:a.target.value}),placeholder:"Detalhes adicionais...",rows:3})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:346",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:347",children:[e.jsx(l,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:348",children:"Categoria *"}),e.jsxs(h,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:349",value:t.categoria,onValueChange:a=>n({...t,categoria:a}),children:[e.jsx(j,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:353",children:e.jsx(M,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:354"})}),e.jsxs(v,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:356",children:[e.jsx(r,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:357",value:"questoes",children:"QuestÃµes"}),e.jsx(r,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:358",value:"videoaula",children:"VÃ­deo-aula"}),e.jsx(r,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:359",value:"revisao",children:"RevisÃ£o"}),e.jsx(r,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:360",value:"redacao",children:"RedaÃ§Ã£o"}),e.jsx(r,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:361",value:"leitura",children:"Leitura"}),e.jsx(r,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:362",value:"outro",children:"Outro"})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:367",children:[e.jsx(l,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:368",children:"Prioridade *"}),e.jsxs(h,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:369",value:t.prioridade,onValueChange:a=>n({...t,prioridade:a}),children:[e.jsx(j,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:373",children:e.jsx(M,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:374"})}),e.jsxs(v,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:376",children:[e.jsx(r,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:377",value:"alta",children:"Alta"}),e.jsx(r,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:378",value:"media",children:"MÃ©dia"}),e.jsx(r,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:379",value:"baixa",children:"Baixa"})]})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:385",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:386",children:[e.jsx(l,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:387",children:"Data InÃ­cio *"}),e.jsx(C,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:388",type:"date",value:t.dataInicio,onChange:a=>n({...t,dataInicio:a.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:395",children:[e.jsx(l,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:396",children:"Data Fim *"}),e.jsx(C,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:397",type:"date",value:t.dataFim,onChange:a=>n({...t,dataFim:a.target.value})})]})]}),!m&&e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:406",children:[e.jsx(l,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:407",children:"Aluno *"}),e.jsxs(h,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:408",value:t.alunoId,onValueChange:a=>n({...t,alunoId:a}),children:[e.jsx(j,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:412",children:e.jsx(M,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:413",placeholder:"Escolha um aluno"})}),e.jsx(v,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:415",children:b.map(a=>e.jsx(r,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:417",value:a.id,children:a.nome},a.id))})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:426",className:"flex gap-2 justify-end",children:[e.jsx(u,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:427",variant:"outline",onClick:()=>x(!1),children:"Cancelar"}),e.jsx(u,{"data-loc":"client/src/pages/mentor/MentorTarefas.tsx:430",onClick:O,children:m?"Atualizar":"Criar"})]})]})]})})]})}export{Te as default};
